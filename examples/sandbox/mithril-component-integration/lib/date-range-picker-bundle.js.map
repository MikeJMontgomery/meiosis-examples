{"version":3,"sources":["webpack://dateRange/webpack/universalModuleDefinition","webpack://dateRange/webpack/bootstrap","webpack://dateRange/./lib/arrows.js","webpack://dateRange/./lib/date-range-picker.js","webpack://dateRange/./lib/date.js","webpack://dateRange/./lib/fill-polyfill.js","webpack://dateRange/./lib/helpers.js","webpack://dateRange/./lib/month.js","webpack://dateRange/./lib/options.js","webpack://dateRange/./lib/strings.js","webpack://dateRange/./lib/year.js","webpack://dateRange/./node_modules/mithril/mithril.js","webpack://dateRange/./node_modules/mithril/stream.js","webpack://dateRange/./node_modules/mithril/stream/stream.js","webpack://dateRange/./node_modules/process/browser.js","webpack://dateRange/./node_modules/setimmediate/setImmediate.js","webpack://dateRange/./node_modules/timers-browserify/main.js","webpack://dateRange/(webpack)/buildin/global.js"],"names":["arrowRight","view","arrowLeft","onremove","state","options","open","document","removeEventListener","close","oncreate","show","map","redraw","oninit","attrs","Object","assign","disableDate","toggle","e","activeElement","classList","contains","addEventListener","start","initialStart","end","initialEnd","prelimEnd","startMonth","initialMonth","Date","monthOne","monthTwo","months","val","onDateSet","closeOnDatesSelected","startParsed","d","parseDateForInput","endParsed","strings","langCode","window","navigator","userLanguage","language","className","singleMonth","onclick","stopPropagation","startInputLabel","length","disabled","readonly","class","placeholder","startInputPlaceholder","onfocus","value","oninput","onInput","date","target","isDateDisabled","getMonth","getFullYear","Error","endInputLabel","endInputPlaceholder","getTime","fragment","weekStart","onbeforeremove","dom","add","Promise","setTimeout","resolve","month","mon","key","onmouseover","undefined","dayRange","minRange","maxRange","getDate","Array","prototype","fill","defineProperty","TypeError","O","len","arguments","relativeStart","k","Math","max","min","relativeEnd","final","isYearChange","o","n","thresholdUp","setMonth","thresholdDown","direction","getDaysInMonth","year","days","push","setDate","createNullCheckedDisableDate","fn","dOrD","setDateClassName","classes","prelimEndDisabled","daysBetweenDates","daysBetween","daysBetweenPrelim","x","forEach","compare","isDateStart","isDateSame","isDateEnd","isDateInBetween","isDateBefore","isDateAfter","isDateInBetweenPrelim","join","prevMonth","newDate","setFullYear","nextMonth","checkIfTallRequired","bools","mo","startDay","adjustPreMonthEmpties","getDay","total","innerWidth","includes","date1","date2","d1","d2","timeDiff","abs","ceil","toMinus","setHours","first","second","isNaN","initialDate","parentElement","remove","dayStrings","daysShort","slice","moveBack","moveUp","concat","empties","onmouseout","i","inititalEnd","Infinity","toLocaleDateString","initDate","day","diff","removeTrailing","str","lang","startDate","monthStrings","parsed","monthShortStrings","weekday","dayShortStrings","monthsShort"],"mappings":"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sC;AACpCjB,aADoC,qBACzB;AACT,YAAMX,IAAI,IAAIR,IAAJ,CAASgC,MAAT,CAAV;AACAxB,UAAEmG,WAAF,CAAc3E,OAAOI,WAAP,KAAuB,CAArC;AACAJ,aAAKxB,CAAL;AACD;AALmC,KAAtC,EAMG,0CANH,CAT0B,CAArB,CAAP;AAiBD;AAnBY,C;;;;;;;;;;;ACHf,6DAAC;AACD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA,mCAAmC;AACnC,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,mCAAmC,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6BAA6B,YAAY;AACtD,GAAG;AACH;AACA;AACA;AACA,8DAA8D,2CAA2C;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,uDAAuD,cAAc;AACrE;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;AACA;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kJAAkJ,aAAa;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,aAAa;AACb;AACA,wBAAwB;AACxB;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sIAAsI;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C,iCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,2DAA2D;AAC3D,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4HAA4H;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,EAAE;AAChE;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,cAAc;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,I;;;;;;;;;;;;;ACxuCD;;AAEA;;;;;;;;;;;;ACFA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,uFAAuF;AACzG;AACA;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA;AACA;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,iCAAiC,oBAAoB;AACvE,qBAAqB,iCAAiC,kBAAkB;AACxE,oBAAoB;AACpB,mBAAmB;;AAEnB,wBAAwB;AACxB,yBAAyB;AACzB,0BAA0B;AAC1B,2BAA2B;;AAE3B;AACA;AACA,kCAAkC,WAAW;AAC7C,EAAE;AACF;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OACiB;;AAEjB,CAAC;;;;;;;;;;;;AChKD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;ACzLD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C","file":"date-range-picker-bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dateRange\"] = factory();\n\telse\n\t\troot[\"dateRange\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/date-range-picker.js\");\n","import m from 'mithril'\n\nexport const arrowRight = {\n  view () {\n    return m(\"svg._1vi5d1b[viewBox='0 0 1000 1000']\", [\n      m(\"path[d='M694.4 242.4l249.1 249.1c11 11 11 21 0 32L694.4 772.7c-5 5-10 7-16 7s-11-2-16-7c-11-11-11-21 0-32l210.1-210.1H67.1c-13 0-23-10-23-23s10-23 23-23h805.4L662.4 274.5c-21-21.1 11-53.1 32-32.1z']\")\n    ])\n  }\n}\n\nexport const arrowLeft = {\n  view () {\n    return m(\"svg._1vi5d1b[viewBox='0 0 1000 1000']\", [\n      m(\"path[d='M336.2 274.5l-210.1 210h805.4c13 0 23 10 23 23s-10 23-23 23H126.1l210.1 210.1c11 11 11 21 0 32-5 5-10 7-16 7s-11-2-16-7l-249.1-249c-11-11-11-21 0-32l249.1-249.1c21-21.1 53 10.9 32 32z']\")\n    ])\n  }\n}\n","import './fill-polyfill'\nimport m from 'mithril'\nimport stream from 'mithril/stream'\nimport defaults from './options'\nimport { nextMonth, prevMonth, checkIfTallRequired, createNullCheckedDisableDate } from './helpers'\nimport { arrowLeft, arrowRight } from './arrows'\nimport year from './year'\nimport month from './month'\nimport strings from './strings'\n\nexport default {\n  onremove ({ state }) {\n    if (!state.options.open) {\n      document.removeEventListener('click', state.close)\n    }\n  },\n  oncreate ({state}) {\n    state.show.map(m.redraw)\n  },\n  oninit ({ state, attrs }) {\n    state.options = Object.assign({}, defaults, attrs)\n    state.options.disableDate = createNullCheckedDisableDate(state.options.disableDate)\n\n    state.show = stream(state.options.open || false)\n\n    state.toggle = (e) => {\n      if (!state.options.open) {\n        if (document.activeElement.classList.contains('date-range-input') && !state.show()) {\n          state.show(!state.show())\n        }\n      }\n    }\n\n    if (!state.options.open) {\n      state.close = () => state.show(false)\n      document.addEventListener('click', state.close)\n    }\n\n    state.start = stream(state.options.initialStart)\n    state.end = stream(state.options.initialEnd)\n    state.prelimEnd = stream()\n\n    const startMonth = (initialStart, initialMonth) => {\n      if (initialStart) {\n        return initialStart\n      } else if (initialMonth) {\n        return initialMonth\n      } else {\n        return new Date()\n      }\n    }\n\n    const monthOne = stream(startMonth(state.options.initialStart, state.options.initialMonth))\n    const monthTwo = monthOne.map(() => nextMonth(monthOne()))\n    state.months = [monthOne, monthTwo]\n\n    state.end.map(val => {\n      if (val) {\n        state.options.onDateSet({\n          start: state.start(),\n          end: state.end()\n        })\n        if (state.options.closeOnDatesSelected) {\n          state.close()\n        }\n      } else {\n        state.options.onDateSet({\n          start: null,\n          end: null\n        })\n      }\n    })\n\n    state.startParsed = state.start.map(d => d ? state.options.parseDateForInput(d) : '')\n    state.endParsed = state.end.map(d => d ? state.options.parseDateForInput(d) : '')\n\n    state.strings = strings(state.options.langCode || window.navigator.userLanguage || window.navigator.language)\n  },\n  view ({ state: { options, months, show, toggle, start, end, prelimEnd, startParsed, endParsed, strings } }) {\n    return m('.date-range', {\n      className: options.singleMonth ? 'single-month' : '',\n      onclick: e => e.stopPropagation()\n    }, [\n      m('.range-inputs', [\n        m('.input-group', [\n          options.startInputLabel.length !== 0 &&\n          m('label', options.startInputLabel),\n          m('input.date-range-input.first-input', {\n            disabled: options.disabled,\n            readonly: options.readonly,\n            class: (show() ? 'focus ' : '') + (options.disabled ? 'disabled' : ''),\n            placeholder: options.startInputPlaceholder,\n            onclick: toggle,\n            onfocus: toggle,\n            value: startParsed(),\n            oninput (e) {\n              if (options.onInput) {\n                const date = options.onInput(e.target.value)\n                const isDateDisabled = options.disableDate(date, start, end)\n                if (date instanceof Date) {\n                  if (!isDateDisabled) {\n                    if (date.getMonth() !== months[0]().getMonth() || date.getFullYear() !== months[0]().getFullYear()) {\n                      months[0](date)\n                    }\n                    start(date)\n                  }\n                } else {\n                  throw Error('That is not a date')\n                }\n              }\n            }\n          })\n        ]),\n        m('.input-group', [\n          options.endInputLabel.length !== 0 &&\n          m('label', options.endInputLabel),\n          m('input.date-range-input.second-input', {\n            disabled: options.disabled,\n            readonly: options.readonly,\n            class: (show() ? 'focus ' : '') + (options.disabled ? 'disabled' : ''),\n            placeholder: options.endInputPlaceholder,\n            onclick: toggle,\n            onfocus: toggle,\n            value: endParsed(),\n            oninput (e) {\n              if (options.onInput) {\n                const date = options.onInput(e.target.value)\n                const isDateDisabled = options.disableDate(date, start, end)\n                if (date instanceof Date) {\n                  if (start() && !isDateDisabled && (date.getTime() > start().getTime())) {\n                    end(date)\n                  }\n                } else {\n                  throw Error('That is not a date')\n                }\n              }\n            }\n          })\n        ])\n      ]),\n      show() &&\n      m.fragment({}, [\n        m('.triangle'),\n        m('.calendar-display', {\n          className: checkIfTallRequired(months, options.singleMonth, options.weekStart) ? 'tall' : '',\n          onbeforeremove ({ dom }) {\n            dom.classList.add('fade-out')\n            return new Promise(resolve => {\n              setTimeout(resolve, 200)\n            })\n          }\n        }, [\n          m('button.previous-month.month-navigation', {\n            onclick () {\n              months[0](prevMonth(months[0]()))\n            }\n          }, m(arrowLeft)),\n\n          m('button.next-month.month-navigation', {\n            onclick () {\n              months[0](nextMonth(months[0]()))\n            }\n          }, m(arrowRight)),\n\n          m(year, {\n            date: months[0]\n          }),\n\n          m('.months-container', months.map(mon => {\n            return m(month, {\n              strings,\n              options,\n              month: mon,\n              key: mon().getTime(),\n              start,\n              end,\n              prelimEnd\n            })\n          }))\n        ])\n      ])\n    ])\n  }\n}\n","import m from 'mithril'\nimport { setDateClassName, daysBetween, isDateAfter } from './helpers'\n\nexport default {\n  view ({ attrs: { date, start, end, prelimEnd, options } }) {\n    return m('.date', {\n      onmouseover () {\n        if (start() && start().getTime() < date.getTime()) {\n          prelimEnd(date)\n        } else {\n          prelimEnd(undefined)\n        }\n      },\n      class: setDateClassName(date, start, end, prelimEnd, options),\n      onclick () {\n        if (options.disableDate(date, start, end)) { return }\n\n        const dayRange = daysBetween(start(), date)\n\n        if (!start()) {\n          start(date)\n        } else if (start() && !end()) {\n          if (isDateAfter(date, start())) {\n            if (options.minRange && options.maxRange) {\n              if (dayRange >= options.minRange && dayRange <= options.maxRange) {\n                end(date)\n              } else if (dayRange < options.minRange || dayRange > options.maxRange) {\n                start(date)\n              }\n            } else if (options.minRange) {\n              if (dayRange >= options.minRange) {\n                end(date)\n              } else if (dayRange < options.minRange || dayRange > options.maxRange) {\n                start(date)\n              }\n            } else if (options.maxRange) {\n              if (dayRange <= options.maxRange) {\n                end(date)\n              }\n            } else {\n              end(date)\n            }\n          } else {\n            start(date)\n          }\n        } else if (start() && end()) {\n          start(date)\n          end(null)\n        }\n      }\n    }, [\n      m('.number', date.getDate())\n    ])\n  }\n}\n","/* eslint-disable */\n\nif (!Array.prototype.fill) {\n  Object.defineProperty(Array.prototype, 'fill', {\n    value: function (value) {\n\n      // Steps 1-2.\n      if (this == null) {\n        throw new TypeError('this is null or not defined');\n      }\n\n      var O = Object(this);\n\n      // Steps 3-5.\n      var len = O.length >>> 0;\n\n      // Steps 6-7.\n      var start = arguments[1];\n      var relativeStart = start >> 0;\n\n      // Step 8.\n      var k = relativeStart < 0 ?\n        Math.max(len + relativeStart, 0) :\n        Math.min(relativeStart, len);\n\n      // Steps 9-10.\n      var end = arguments[2];\n      var relativeEnd = end === undefined ?\n        len : end >> 0;\n\n      // Step 11.\n      var final = relativeEnd < 0 ?\n        Math.max(len + relativeEnd, 0) :\n        Math.min(relativeEnd, len);\n\n      // Step 12.\n      while (k < final) {\n        O[k] = value;\n        k++;\n      }\n\n      // Step 13.\n      return O;\n    }\n  });\n}","export const isYearChange = (o, n) => {\n  const thresholdUp = new Date(o)\n  thresholdUp.setMonth(o.getMonth() + 6)\n  const thresholdDown = new Date(o)\n  thresholdDown.setMonth(o.getMonth() - 6)\n  const direction = n < o ? 'right' : 'left'\n\n  return (n > thresholdUp && direction === 'left') || (n < thresholdDown && direction === 'right')\n}\n\nexport const getDaysInMonth = (month, year) => {\n  var date = new Date(year, month, 1)\n  var days = []\n  while (date.getMonth() === month) {\n    const d = new Date(date)\n    days.push(d)\n    date.setDate(date.getDate() + 1)\n  }\n  return days\n}\n\nexport const createNullCheckedDisableDate = (fn) => {\n  return (date, start, end) => {\n    return fn(dOrD(date), dOrD(start()), dOrD(end()))\n  }\n}\n\nexport const setDateClassName = (date, start, end, prelimEnd, options) => {\n  const classes = []\n\n  if (options.disableDate(date, start, end)) { classes.push('date-selection-disabled') }\n\n  let prelimEndDisabled = prelimEnd() && options.disableDate(prelimEnd(), start, end)\n\n  if (options.minRange || options.maxRange) {\n    const daysBetweenDates = daysBetween(start(), date)\n    const daysBetweenPrelim = daysBetween(start(), prelimEnd());\n\n    [ x => x < options.minRange, x => x > options.maxRange ].forEach(compare => {\n      prelimEndDisabled = compare(daysBetweenPrelim) || prelimEndDisabled\n      if (date > start() && compare(daysBetweenDates)) {\n        classes.push('date-selection-disabled')\n      }\n    })\n  }\n\n  const isDateStart = isDateSame(start(), date)\n  const isDateEnd = isDateSame(end(), date)\n  const isDateInBetween = isDateBefore(date, end()) && isDateAfter(date, start())\n  const isDateInBetweenPrelim = isDateBefore(date, prelimEnd()) && isDateAfter(date, start()) && !prelimEndDisabled\n\n  if (isDateStart) {\n    classes.push('first-date')\n  } else if (isDateEnd) {\n    classes.push('second-date')\n  } else if (isDateInBetween || (isDateInBetweenPrelim && !end())) {\n    classes.push('in-between')\n  }\n\n  return classes.join(' ')\n}\n\nexport const prevMonth = date => {\n  const newDate = new Date()\n  newDate.setDate(1)\n  if (date.getMonth() > 0) {\n    newDate.setFullYear(date.getFullYear())\n    newDate.setMonth(date.getMonth() - 1)\n  } else {\n    newDate.setMonth(11)\n    newDate.setFullYear(date.getFullYear() - 1)\n  }\n  return newDate\n}\n\nexport const nextMonth = date => {\n  const newDate = new Date()\n  newDate.setDate(1)\n  if (date.getMonth() < 11) {\n    newDate.setFullYear(date.getFullYear())\n    newDate.setMonth(date.getMonth() + 1)\n  } else {\n    newDate.setMonth(0)\n    newDate.setFullYear(date.getFullYear() + 1)\n  }\n  return newDate\n}\n\nexport const checkIfTallRequired = (months, singleMonth, weekStart) => {\n  const bools = months.map(mo => {\n    const month = mo()\n    const days = getDaysInMonth(month.getMonth(), month.getFullYear())\n    const startDay = adjustPreMonthEmpties(days[0].getDay(), weekStart)\n    const total = startDay + days.length\n    return total > 35\n  })\n  if (window.innerWidth < 768 || singleMonth) {\n    return bools[0]\n  } else {\n    return bools.includes(true)\n  }\n}\n\nexport const daysBetween = (date1, date2) => {\n  const d1 = new Date(date1)\n  const d2 = new Date(date2)\n  var timeDiff = Math.abs(d2.getTime() - d1.getTime())\n  return Math.ceil(timeDiff / (1000 * 3600 * 24)) + 1\n}\n\nexport const adjustPreMonthEmpties = (startDay, weekStart) => {\n  if (startDay - weekStart < 0) {\n    const toMinus = weekStart - startDay\n    return 7 - toMinus\n  } else {\n    return startDay - weekStart\n  }\n}\n\nexport const isDateSame = (date1, date2) => {\n  const d1 = new Date(date1)\n  const d2 = new Date(date2)\n  d1.setHours(12, 0, 0, 0)\n  d2.setHours(12, 0, 0, 0)\n\n  return d1.getTime() === d2.getTime()\n}\n\nexport const isDateBefore = (first, second) => {\n  const d1 = new Date(first)\n  const d2 = new Date(second)\n  d1.setHours(12, 0, 0, 0)\n  d2.setHours(12, 0, 0, 0)\n\n  return d1.getTime() < d2.getTime()\n}\n\nexport const isDateAfter = (first, second) => {\n  const d1 = new Date(first)\n  const d2 = new Date(second)\n  d1.setHours(12, 0, 0, 0)\n  d2.setHours(12, 0, 0, 0)\n\n  return d1.getTime() > d2.getTime()\n}\n\nexport const dOrD = (d) => {\n  const date = new Date(d)\n  if (!isNaN(date.getTime())) {\n    return date\n  } else {\n    return null\n  }\n}\n","import m from 'mithril'\nimport { isYearChange, getDaysInMonth, adjustPreMonthEmpties } from './helpers'\nimport date from './date'\n\nexport default {\n  onbeforeremove ({ dom, state, attrs: { month } }) {\n    if (!isYearChange(state.initialDate, month())) {\n      const direction = month() < state.initialDate ? 'right' : 'left'\n      dom.classList.add('out-' + direction)\n      dom.parentElement.classList.add('in-' + direction)\n      return new Promise(resolve => {\n        setTimeout(() => {\n          dom.parentElement.classList.remove('in-' + direction)\n          resolve()\n        }, 300)\n      })\n    }\n  },\n  oninit ({ state, attrs: { month, options, strings } }) {\n    state.initialDate = month()\n\n    state.dayStrings = strings.daysShort.slice(0)\n    if (options.weekStart) {\n      const moveBack = state.dayStrings.slice(0, options.weekStart)\n      const moveUp = state.dayStrings.slice(options.weekStart, state.dayStrings.length)\n\n      state.dayStrings = moveUp.concat(moveBack)\n    }\n\n    state.days = getDaysInMonth(month().getMonth(), month().getFullYear())\n    state.startDay = state.days[0].getDay()\n    state.empties = new Array(adjustPreMonthEmpties(state.startDay, options.weekStart)).fill(0)\n  },\n  view ({ state: { dayStrings, empties, days }, attrs: { options, month, start, end, prelimEnd, strings } }) {\n    return m('.month', {\n      onmouseout () {\n        prelimEnd(undefined)\n      }\n    }, [\n      m('h5', strings.months[month().getMonth()]),\n      m('.month-grid', [\n        m('.days', dayStrings.map((d, i) => {\n          return m('.day', dayStrings[i])\n        })),\n        m('.dates', [\n          empties.map(() => {\n            return m('.empty-date')\n          }),\n          days.map(d => {\n            return m(date, {\n              date: d,\n              start,\n              end,\n              prelimEnd,\n              options\n            })\n          })\n        ])\n      ])\n    ])\n  }\n}\n","export default {\n  // Set the start date value\n  initialStart: undefined,\n  // Set the end date value\n  inititalEnd: undefined,\n  // Set the locale for displaying month and day names\n  langCode: '',\n  // Set whether the picker is permanently open\n  open: false,\n  // This will make the inputs look disabled and prevent the picker from displaying\n  disabled: false,\n  // This will set the inputs to be readonly\n  readonly: true,\n  // Sets the label for the start input\n  startInputLabel: '',\n  // Sets the label for the end input\n  endInputLabel: '',\n  // Sets the placeholder for the start input\n  startInputPlaceholder: 'Start Date',\n  // Sets the placeholder for the end input\n  endInputPlaceholder: 'End Date',\n  // Sets the minimum allowed range length in days\n  minRange: -Infinity,\n  // Sets the maximum allowed range length in days\n  maxRange: Infinity,\n  // Sets whether the picker will close once two dates have been picked\n  closeOnDatesSelected: false,\n  // Sets whether one month, instead of two, is displayed\n  singleMonth: false,\n  // Changes start day of the week\n  weekStart: 0,\n  // Sets the month to be displayed\n  initialMonth: undefined,\n  // Retrieve the dates from the picker\n  onDateSet: ({start, end}) => { },\n  // This will run for each date within the view and should return a boolean for whether that date should be disabled\n  disableDate: () => false,\n  // This will run when any date is picked to format the strings that get displayed within the inputs\n  parseDateForInput: d => d.toLocaleDateString(),\n  // This will run oninput for both input fields. This function receives a string and should return a date\n  onInput: undefined\n}\n","\nconst initDate = () => {\n  const d = new Date()\n  d.setMonth(0)\n  const day = d.getDay()\n  const diff = d.getDate() - day + (day === 0 ? -7 : 0)\n  return new Date(d.setDate(diff))\n}\n\nconst removeTrailing = (str) => {\n  if (str.slice(-1) === ',' || str.slice(-1) === '.') {\n    return str.slice(0, -1)\n  } else {\n    return str\n  }\n}\n\nexport default function strings (lang) {\n  const days = new Array(7).fill(0)\n  const months = Array(12).fill(0)\n\n  let startDate = initDate()\n  const monthStrings = months.map(() => {\n    var options = {month: 'long'}\n    const parsed = startDate.toLocaleDateString(lang, options)\n    startDate.setMonth(startDate.getMonth() + 1)\n    return removeTrailing(parsed)\n  })\n\n  startDate = initDate()\n  const monthShortStrings = months.map(() => {\n    var options = {month: 'short'}\n    const parsed = startDate.toLocaleDateString(lang, options)\n    startDate.setMonth(startDate.getMonth() + 1)\n    return removeTrailing(parsed)\n  })\n\n  startDate = initDate()\n  const dayStrings = days.map(() => {\n    var options = {weekday: 'long'}\n    const parsed = startDate.toLocaleDateString(lang, options)\n    startDate.setDate(startDate.getDate() + 1)\n    return removeTrailing(parsed)\n  })\n\n  startDate = initDate()\n  const dayShortStrings = days.map(() => {\n    var options = {weekday: 'short'}\n    const parsed = startDate.toLocaleDateString(lang, options)\n    startDate.setDate(startDate.getDate() + 1)\n    return removeTrailing(parsed)\n  })\n\n  return {\n    months: monthStrings,\n    monthsShort: monthShortStrings,\n    days: dayStrings,\n    daysShort: dayShortStrings\n  }\n}\n\nstrings()\n","import m from 'mithril'\nimport { arrowRight, arrowLeft } from './arrows'\n\nexport default {\n  view ({ attrs: { date } }) {\n    return m('.year-container', [\n      m('button.year-previous.year-navigation', {\n        onclick () {\n          const d = new Date(date())\n          d.setFullYear(date().getFullYear() - 1)\n          date(d)\n        }\n      }, m(arrowLeft)),\n      m('.year', date().getFullYear()),\n      m('button.year-next.year-navigation', {\n        onclick () {\n          const d = new Date(date())\n          d.setFullYear(date().getFullYear() + 1)\n          date(d)\n        }\n      }, m(arrowRight))\n    ])\n  }\n}\n",";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children, text: text, dom: dom, domSize: undefined, state: undefined, _state: undefined, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, attrs, children) {\n\tvar hasAttrs = false, childList, text\n\tvar className = attrs.className || attrs.class\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor(var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) {\n\t\t\t\tnewAttrs[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key)) {\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className !== undefined) {\n\t\tif (attrs.class !== undefined) {\n\t\t\tattrs.class = undefined\n\t\t\tattrs.className = className\n\t\t}\n\t\tif (state.attrs.className != null) {\n\t\t\tattrs.className = state.attrs.className + \" \" + className\n\t\t}\n\t}\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\thasAttrs = true\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\ttext = children[0].children\n\t} else {\n\t\tchildList = children\n\t}\n\treturn Vnode(state.tag, attrs.key, hasAttrs ? attrs : undefined, childList, text)\n}\nfunction hyperscript(selector) {\n\t// Because sloppy mode sucks\n\tvar attrs = arguments[1], start = 2, children\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tif (typeof selector === \"string\") {\n\t\tvar cached = selectorCache[selector] || compileSelector(selector)\n\t}\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = 1\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\tvar normalized = Vnode.normalizeChildren(children)\n\tif (typeof selector === \"string\") {\n\t\treturn execSelector(cached, attrs, normalized)\n\t} else {\n\t\treturn Vnode(selector, attrs.key, attrs, normalized)\n\t}\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function(attrs1, children) {\n\treturn Vnode(\"[\", attrs1.key, attrs1, Vnode.normalizeChildren(children), undefined, undefined)\n}\nvar m = hyperscript\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key0 in object) {\n\t\tdestructure(key0, object[key0])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key0, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key0) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar FILE_PROTOCOL_REGEX = new RegExp(\"^file://\", \"i\")\nvar _8 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\t\treturn function finalize(promise0) {\n\t\t\tvar then0 = promise0.then\n\t\t\tpromise0.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise0\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\t\t\tvar useBody = (args.method === \"GET\" || args.method === \"TRACE\") ? false : (typeof args.useBody === \"boolean\" ? args.useBody : true)\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\t\t\tvar xhr = new $window.XMLHttpRequest(),\n\t\t\t\taborted = false,\n\t\t\t\t_abort = xhr.abort\n\t\t\txhr.abort = function abort() {\n\t\t\t\taborted = true\n\t\t\t\t_abort.call(xhr)\n\t\t\t}\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (args.serialize === JSON.stringify && useBody && !(args.headers && args.headers.hasOwnProperty(\"Content-Type\"))) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize && !(args.headers && args.headers.hasOwnProperty(\"Accept\"))) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tfor (var key in args.headers) if ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif(aborted) return\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || FILE_PROTOCOL_REGEX.test(args.url)) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise0 : finalize(promise0)\n\t}\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise0 : finalize(promise0)\n\t}\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\tfunction extract(xhr) {return xhr.responseText}\n\tfunction cast(type0, data) {\n\t\tif (typeof type0 === \"function\") {\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type0(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type0(data)\n\t\t}\n\t\treturn data\n\t}\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\nvar requestService = _8(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(parent, vnode, nextSibling)\n\t\t\t\tcase \"<\": return createHTML(parent, vnode, nextSibling)\n\t\t\t\tcase \"[\": return createFragment(parent, vnode, hooks, ns, nextSibling)\n\t\t\t\tdefault: return createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t\treturn vnode.dom\n\t}\n\tfunction createHTML(parent, vnode, nextSibling) {\n\t\tvar match1 = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent1 = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match1[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent1)\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs2 = vnode.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tvnode._state = vnode.state\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tinitLifecycle(vnode._state, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tvar element = createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\tinsertNode(parent, element, nextSibling)\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\t//update\n\tfunction updateNodes(parent, old, vnodes, recycling, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tif (old.length === vnodes.length) {\n\t\t\t\tvar isUnkeyed = false\n\t\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\t\tif (vnodes[i] != null && old[i] != null) {\n\t\t\t\t\t\tisUnkeyed = vnodes[i].key == null && old[i].key == null\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isUnkeyed) {\n\t\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\t\telse if (old[i] == null && vnodes[i] != null) createNode(parent, vnodes[i], hooks, ns, getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), recycling, ns)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\trecycling = recycling || isRecyclable(old, vnodes)\n\t\t\tif (recycling) {\n\t\t\t\tvar pool = old.pool\n\t\t\t\told = old.concat(old.pool)\n\t\t\t}\n\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\telse if (o == null) oldStart++\n\t\t\t\telse if (v == null) start++\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldStart >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t}\n\t\t\t\t\telse break\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\telse if (v == null) end--\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldIndex >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar dom = createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend--\n\t\t\t\t}\n\t\t\t\tif (end < start) break\n\t\t\t}\n\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode._state = old._state\n\t\t\tvnode.events = old.events\n\t\t\tif (!recycling && shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tif (recycling) {\n\t\t\t\t\t\tvnode.state = {}\n\t\t\t\t\t\tinitLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t\t}\n\t\t\t\t\telse updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, recycling, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, recycling, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, recycling, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle0 multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, recycling, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tif (recycling) {\n\t\t\tinitComponent(vnode, hooks)\n\t\t} else {\n\t\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tupdateLifecycle(vnode._state, vnode, hooks)\n\t\t}\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key2 = vnode.key\n\t\t\t\tif (key2 != null) map[key2] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count0 = vnode.domSize\n\t\tif (count0 != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode.attrs.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode._state.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count0 = vnode.domSize || 1\n\t\t\t\t\tif (count0 > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count0) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (typeof vnode._state.onremove === \"function\") vnode._state.onremove.call(vnode.state, vnode)\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode, attrs2, ns) {\n\t\tfor (var key2 in attrs2) {\n\t\t\tsetAttr(vnode, key2, null, attrs2[key2], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key2, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key2 === \"key\" || key2 === \"is\" || (old === value && !isFormAttribute(vnode, key2)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key2)) return\n\t\tvar nsLastIndex = key2.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key2.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key2.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key2[0] === \"o\" && key2[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key2, value)\n\t\telse if (key2 === \"style\") updateStyle(element, old, value)\n\t\telse if (key2 in element && !isAttribute(key2) && ns === undefined && !isCustomElement(vnode)) {\n\t\t\tif (key2 === \"value\") {\n\t\t\t\tvar normalized0 = \"\" + value // eslint-disable-line no-implicit-coercion\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\") {\n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\tif (vnode.dom.selectedIndex === -1 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (old !== null && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old != null && vnode.dom.value === normalized0) return\n\t\t\t}\n\t\t\t// If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error0 will occur.\n\t\t\tif (vnode.tag === \"input\" && key2 === \"type\") {\n\t\t\t\telement.setAttribute(key2, value)\n\t\t\t\treturn\n\t\t\t}\n\t\t\telement[key2] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key2, \"\")\n\t\t\t\telse element.removeAttribute(key2)\n\t\t\t}\n\t\t\telse element.setAttribute(key2 === \"className\" ? \"class\" : key2, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs2 = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs2 != null) {\n\t\t\tif (\"value\" in attrs2) setAttr(vnode, \"value\", null, attrs2.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key2 in attrs2) {\n\t\t\t\tsetAttr(vnode, key2, old && old[key2], attrs2[key2], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key2 in old) {\n\t\t\t\tif (attrs2 == null || !(key2 in attrs2)) {\n\t\t\t\t\tif (key2 === \"className\") key2 = \"class\"\n\t\t\t\t\tif (key2[0] === \"o\" && key2[1] === \"n\" && !isLifecycleMethod(key2)) updateEvent(vnode, key2, undefined)\n\t\t\t\t\telse if (key2 !== \"key\") vnode.dom.removeAttribute(key2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction isCustomElement(vnode){\n\t\treturn vnode.attrs.is || vnode.tag.indexOf(\"-\") > -1\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key2 in style) {\n\t\t\t\telement.style[key2] = style[key2]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key2 in old) {\n\t\t\t\t\tif (!(key2 in style)) element.style[key2] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode, key2, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key2 in element) element[key2] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key2.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key2] === callback) return\n\t\t\tif (vnode.events[key2] != null) element.removeEventListener(eventName, vnode.events[key2], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key2] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key2], false)\n\t\t\t}\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeupdate === \"function\") forceComponentUpdate = vnode._state.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time0 rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tif (!Array.isArray(vnodes)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), false, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\t// document.activeElement can return null in IE https://developer.mozilla.org/en-US/docs/Web/API/Document/activeElement\n\t\tif (active != null && $doc.activeElement !== active) active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n\treturn {render: render, setEventCallback: setEventCallback}\n}\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\nvar _11 = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw === false) e.redraw = undefined\n\t\telse redraw()\n\t})\n\tvar callbacks = []\n\tfunction subscribe(key1, callback) {\n\t\tunsubscribe(key1)\n\t\tcallbacks.push(key1, throttle(callback))\n\t}\n\tfunction unsubscribe(key1) {\n\t\tvar index = callbacks.indexOf(key1)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n\tfunction redraw() {\n\t\tfor (var i = 1; i < callbacks.length; i += 2) {\n\t\t\tcallbacks[i]()\n\t\t}\n\t}\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _11(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _16 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\tredrawService0.redraw()\n\t}\n}\nm.mount = _16(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data0 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j).join()\n\t\t\t\tif (counters[key5] == null) counters[key5] = 0\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data0\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize1(fragment0) {\n\t\tvar data = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback0) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback0()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key4 in queryParams) queryData[key4] = queryParams[key4]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key4 in hashParams) hashData[key4] = hashParams[key4]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize1(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize1(\"search\").slice(router.prefix.length) + normalize1(\"hash\")\n\t\t\tdefault: return normalize1(\"pathname\").slice(router.prefix.length) + normalize1(\"search\") + normalize1(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key4 in data) queryData[key4] = data[key4]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match2, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _20 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v) {return v}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar run1 = function() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\trun1()\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService0.subscribe(root, run1)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix0) {routeService.prefix = prefix0}\n\troute.link = function(vnode1) {\n\t\tvnode1.dom.setAttribute(\"href\", routeService.prefix + vnode1.attrs.href)\n\t\tvnode1.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\troute.param = function(key3) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key3 !== \"undefined\") return attrs3[key3]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _20(window, redrawService)\nm.withAttr = function(attrName, callback1, context) {\n\treturn function(e) {\n\t\tcallback1.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\nvar _28 = coreRenderer(window)\nm.render = _28.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"1.1.6\"\nm.vnode = Vnode\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","\"use strict\"\n\nmodule.exports = require(\"./stream/stream\")\n","/* eslint-disable */\n;(function() {\n\"use strict\"\n/* eslint-enable */\n\nvar guid = 0, HALT = {}\nfunction createStream() {\n\tfunction stream() {\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\t\treturn stream._state.value\n\t}\n\tinitStream(stream)\n\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\n\treturn stream\n}\nfunction initStream(stream) {\n\tstream.constructor = createStream\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\n\n\tObject.defineProperties(stream, {\n\t\tend: {get: function() {\n\t\t\tif (!stream._state.endStream) {\n\t\t\t\tvar endStream = createStream()\n\t\t\t\tendStream.map(function(value) {\n\t\t\t\t\tif (value === true) {\n\t\t\t\t\t\tunregisterStream(stream)\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\n\t\t\t\t\t}\n\t\t\t\t\treturn value\n\t\t\t\t})\n\t\t\t\tstream._state.endStream = endStream\n\t\t\t}\n\t\t\treturn stream._state.endStream\n\t\t}}\n\t})\n}\nfunction updateStream(stream, value) {\n\tupdateState(stream, value)\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\n\tif (stream._state.unregister != null) stream._state.unregister()\n\tfinalize(stream)\n}\nfunction updateState(stream, value) {\n\tstream._state.value = value\n\tstream._state.changed = true\n\tif (stream._state.state !== 2) stream._state.state = 1\n}\nfunction updateDependency(stream, mustSync) {\n\tvar state = stream._state, parents = state.parents\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\n\t\tvar value = stream._state.derive()\n\t\tif (value === HALT) return false\n\t\tupdateState(stream, value)\n\t}\n}\nfunction finalize(stream) {\n\tstream._state.changed = false\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\n}\n\nfunction combine(fn, streams) {\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\n\treturn initDependency(createStream(), streams, function() {\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\n\t})\n}\n\nfunction initDependency(dep, streams, derive) {\n\tvar state = dep._state\n\tstate.derive = derive\n\tstate.parents = streams.filter(notEnded)\n\n\tregisterDependency(dep, state.parents)\n\tupdateDependency(dep, true)\n\n\treturn dep\n}\nfunction registerDependency(stream, parents) {\n\tfor (var i = 0; i < parents.length; i++) {\n\t\tparents[i]._state.deps[stream._state.id] = stream\n\t\tregisterDependency(stream, parents[i]._state.parents)\n\t}\n}\nfunction unregisterStream(stream) {\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\n\t\tvar parent = stream._state.parents[i]\n\t\tdelete parent._state.deps[stream._state.id]\n\t}\n\tfor (var id in stream._state.deps) {\n\t\tvar dependent = stream._state.deps[id]\n\t\tvar index = dependent._state.parents.indexOf(stream)\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\n\t}\n\tstream._state.state = 2 //ended\n\tstream._state.deps = {}\n}\n\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\nfunction valueOf() {return this._state.value}\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\n\nfunction valid(stream) {return stream._state }\nfunction active(stream) {return stream._state.state === 1}\nfunction changed(stream) {return stream._state.changed}\nfunction notEnded(stream) {return stream._state.state !== 2}\n\nfunction merge(streams) {\n\treturn combine(function() {\n\t\treturn streams.map(function(s) {return s()})\n\t}, streams)\n}\n\nfunction scan(reducer, seed, stream) {\n\tvar newStream = combine(function (s) {\n\t\treturn seed = reducer(seed, s._state.value)\n\t}, [stream])\n\n\tif (newStream._state.state === 0) newStream(seed)\n\n\treturn newStream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) {\n\t\tvar stream = tuple[0]\n\t\tif (stream._state.state === 0) stream(undefined)\n\t\treturn stream\n\t})\n\n\tvar newStream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\n\t\tstreams.forEach(function(stream, idx) {\n\t\t\tif (changed.indexOf(stream) > -1) {\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\n\t\t\t}\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\treturn newStream\n}\n\ncreateStream[\"fantasy-land/of\"] = createStream\ncreateStream.merge = merge\ncreateStream.combine = combine\ncreateStream.scan = scan\ncreateStream.scanMerge = scanMerge\ncreateStream.HALT = HALT\n\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\nelse window.m = {stream : createStream}\n\n}());\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmeidate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n"],"sourceRoot":""}