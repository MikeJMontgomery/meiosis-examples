!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.meiosis=e():n.meiosis=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=8)}([function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n&&n["@@functional/placeholder"]===!0}},function(n,e){n.exports=function(n,e){switch(n){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,t){return e.apply(this,arguments)};case 3:return function(n,t,r){return e.apply(this,arguments)};case 4:return function(n,t,r,u){return e.apply(this,arguments)};case 5:return function(n,t,r,u,o){return e.apply(this,arguments)};case 6:return function(n,t,r,u,o,a){return e.apply(this,arguments)};case 7:return function(n,t,r,u,o,a,i){return e.apply(this,arguments)};case 8:return function(n,t,r,u,o,a,i,s){return e.apply(this,arguments)};case 9:return function(n,t,r,u,o,a,i,s,c){return e.apply(this,arguments)};case 10:return function(n,t,r,u,o,a,i,s,c,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(n,e,t){var r=t(0);n.exports=function(n){return function e(t){return 0===arguments.length||r(t)?e:n.apply(this,arguments)}}},function(n,e,t){"use strict";function r(){var n=function(n){if(!n.initialModel||!n.modelChanges)throw new Error("Please specify initialModel and modelChanges.");var t={},r=[],u=e.scan(function(n,e){return e(n)},n.initialModel,n.modelChanges),i=u,s="modelChanges";t[s]=u,r.push({name:s,stream:u}),(n.mappers||[]).forEach(function(n){var i=o(n),s=a(n);u=e.map(s,u),i&&(t[i]=u),r.push({name:i||"",stream:u})});var c=e.stream();e.on(c,u),t.render=c;var f=window&&window.__MEIOSIS_TRACER_GLOBAL_HOOK__;if(f){var d=n.copy||function(n){return JSON.parse(JSON.stringify(n))},p=[],l=!1,h=e.stream(!0),v=e.stream(new Date),g=v();e.on(function(){return v(new Date)},n.modelChanges),window.addEventListener("message",function(n){"MEIOSIS_RENDER_MODEL"===n.data.type?(h(n.data.sendValuesBack),i(n.data.model)):"MEIOSIS_TRACER_INIT"===n.data.type&&(l=!0,p.forEach(function(n){return window.postMessage({type:"MEIOSIS_VALUES",values:n},"*")}))}),e.on(function(){var n=v(),e=n!==g;g=n;var t=r.map(function(n){return{name:n.name,value:d(n.stream())}});h()&&(l?window.postMessage({type:"MEIOSIS_VALUES",values:t,update:e},"*"):p.push(t))},u)}return t};return{run:n}}var u=t(4);e.combine=u.combine,e.map=u.map,e.merge=u.merge,e.on=u.on,e.scan=u.scan,e.stream=u.stream,e.mergeAll=function(n){var t=e.stream();return n.forEach(function(n){return e.map(t,n)}),t};var o=function(n){return"function"==typeof n?void 0:Object.keys(n)[0]},a=function(n){var e=o(n);return e?n[e]:n};e.newInstance=r;var i=r(),s=i.run;e.run=s},function(n,e,t){"use strict";function r(n){return!!(n&&n.constructor&&n.call&&n.apply)}function u(){return!0}function o(n,e){var t,r,o,a,i=f([],u);for(o=[],a=[],t=0;t<e.length;++t)void 0!==e[t]&&(o.push(e[t]),void 0!==e[t].end&&a.push(e[t].end));return r=f(o,n),r.depsChanged=[],r.fnArgs=r.deps.concat([r,r.depsChanged]),r.end=i,i.listeners.push(r),y(a,i),i.deps=a,p(r),r}function a(n){return A.map(n,this)}function i(n){var e=this;return o(function(n,e,t){t(n.val(e.val))},[e,n])}function s(){return"stream("+this.val+")"}function c(){function n(e){return 0===arguments.length?n.val:(g(n,e),n)}return n.hasVal=!1,n.val=void 0,n.vals=[],n.listeners=[],n.queued=!1,n.end=void 0,n.map=a,n.ap=i,n.of=A.stream,n.toString=s,n}function f(n,e){var t=c();return t.fn=e,t.deps=n,t.depsMet=!1,t.depsChanged=n.length>0?[]:void 0,t.shouldUpdate=!1,y(n,t),t}function d(n){return n.depsMet=n.deps.every(function(n){return n.hasVal}),!n.depsMet}function p(n){if(!(n.depsMet!==!0&&d(n)||void 0!==n.end&&n.end.val===!0)){if(void 0!==M)return void S.push(n);M=n,n.depsChanged&&(n.fnArgs[n.fnArgs.length-1]=n.depsChanged);var e=n.fn.apply(n.fn,n.fnArgs);void 0!==e&&n(e),M=void 0,void 0!==n.depsChanged&&(n.depsChanged=[]),n.shouldUpdate=!1,I===!1&&v()}}function l(n){var e,t,r,u=n.listeners;for(e=0;e<u.length;++e)r=u[e],r.end===n?C(r):(void 0!==r.depsChanged&&r.depsChanged.push(n),r.shouldUpdate=!0,h(r));for(;b>=0;--b)t=_[b],t.shouldUpdate===!0&&p(t),t.queued=!1}function h(n){var e,t=n.listeners;if(n.queued===!1){for(n.queued=!0,e=0;e<t.length;++e)h(t[e]);_[++b]=n}}function v(){for(I=!0;S.length>0;){var n=S.shift();n.vals.length>0&&(n.val=n.vals.shift()),l(n)}I=!1}function g(n,e){return void 0!==e&&null!==e&&r(e.then)?void e.then(n):(n.val=e,n.hasVal=!0,void(void 0===M?(I=!0,l(n),S.length>0?v():I=!1):M===n?m(n,n.listeners):(n.vals.push(e),S.push(n))))}function m(n,e){var t,r;for(t=0;t<e.length;++t)r=e[t],r.end!==n?(void 0!==r.depsChanged&&r.depsChanged.push(n),r.shouldUpdate=!0):C(r)}function y(n,e){for(var t=0;t<n.length;++t)n[t].listeners.push(e)}function w(n,e){var t=e.indexOf(n);e[t]=e[e.length-1],e.length--}function O(n){for(var e=0;e<n.deps.length;++e)w(n,n.deps[e].listeners);n.deps.length=0}function C(n){void 0!==n.deps&&O(n),void 0!==n.end&&O(n.end)}function E(){}var M,x=t(5),S=[],_=[],b=-1,I=!1,A={};A.stream=function(n){var e=f([],u),t=c();return t.end=e,t.fnArgs=[],e.listeners.push(t),t.toJSON=function(){return t()},arguments.length>0&&t(n),t},A.combine=x(2,o),A.isStream=function(n){return r(n)&&"hasVal"in n},A.immediate=function(n){return n.depsMet===!1&&(n.depsMet=!0,p(n)),n},A.endsOn=function(n,e){return O(e.end),n.listeners.push(e.end),e.end.deps.push(n),e},A.map=x(2,function(n,e){return o(function(e,t){t(n(e.val))},[e])}),A.on=x(2,function(n,e){return o(function(e){n(e.val)},[e])}),A.scan=x(3,function(n,e,t){var r=o(function(t,r){r(e=n(e,t.val))},[t]);return r.hasVal||r(e),r}),A.merge=x(2,function(n,e){var t=A.immediate(o(function(n,e,t,r){r[0]?t(r[0]()):n.hasVal?t(n.val):e.hasVal&&t(e.val)},[n,e]));return A.endsOn(o(function(){return!0},[n.end,e.end]),t),t}),A.transduce=x(2,function(n,e){return n=n(new E),o(function(e,t){var r=n["@@transducer/step"](void 0,e.val);return r&&r["@@transducer/reduced"]===!0?(t.end(!0),r["@@transducer/value"]):r},[e])}),A.curryN=x,E.prototype["@@transducer/init"]=function(){},E.prototype["@@transducer/result"]=function(){},E.prototype["@@transducer/step"]=function(n,e){return e},n.exports=A},function(n,e,t){var r=t(1),u=t(2),o=t(6),a=t(7);n.exports=o(function(n,e){return 1===n?u(e):r(n,a(n,[],e))})},function(n,e,t){var r=t(2),u=t(0);n.exports=function(n){return function e(t,o){switch(arguments.length){case 0:return e;case 1:return u(t)?e:r(function(e){return n(t,e)});default:return u(t)&&u(o)?e:u(t)?r(function(e){return n(e,o)}):u(o)?r(function(e){return n(t,e)}):n(t,o)}}}},function(n,e,t){var r=t(1),u=t(0);n.exports=function n(e,t,o){return function(){for(var a=[],i=0,s=e,c=0;c<t.length||i<arguments.length;){var f;c<t.length&&(!u(t[c])||i>=arguments.length)?f=t[c]:(f=arguments[i],i+=1),a[c]=f,u(f)||(s-=1),c+=1}return s<=0?o.apply(this,a):r(s,n(e,a,o))}}},function(n,e,t){"use strict";function r(n){for(var t in n)e.hasOwnProperty(t)||(e[t]=n[t])}r(t(3))}])});
//# sourceMappingURL=meiosis.min.js.map