!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.meiosis=t():e.meiosis=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(1)),r(n(2))},function(e,t,n){"use strict";function r(){function e(e){if(!(e&&(e.actions||e.nextAction||e.initialModel||e.ready||e.receive||e.state||e.view||e.postRender)))throw new Error("Please specify a config when calling createComponent.");var o=e.initialModel;if(o){if("function"!=typeof o)throw new Error("initialModel in createComponent must be a function. You can pass the root initialModel object to the run function.");t.push(o)}var i=e.state;i&&n.push(i);var a=e.actions?e.actions(E):E,u=e.receive;u&&r.push(u);var p=e.ready;p&&s.push(function(){return p(a)});var d=e.postRender;d&&c.push(d);var l=e.nextAction;return l&&f.push(function(e,t){return l(e,t,a)}),function(t){return e.view?e.view(t,a):void 0}}var t=[],n=[],r=[],s=[],c=[],f=[],p=o.defaultWireCreator(),d=o.defaultWireCreator(),l=p("meiosis_"+a++),v=d(),E=v.emit,m=function(o){var a=o.initialModel||{};t.forEach(function(e){return a=e(a)});var p=o.state||function(e){return e};n.forEach(function(e){var t=p;p=function(n,r){return e(n,t(n))}}),v.listen(function(e){for(var t=!0,n=0;n<r.length;n++){var o=r[n],u=o(a,e);if(u===i){t=!1;break}a=u}t&&(l.emit(a),f.forEach(function(t){return t(a,e)}))});var d=function(e){var t=o.renderer(e,o.rootComponent);return c.forEach(function(t){return t(e)}),t};d.initialModel=a,d.state=p;var E=d;l.listen(function(e){return E(p(e))}),l.emit(a),s.forEach(function(e){return e()});var m=window.__MEIOSIS_TRACER_DEVTOOLS_GLOBAL_HOOK__;if(m){var I=u(a),S=[],w=!1;e({receive:function(e,t){return w?window.postMessage({type:"MEIOSIS_RECEIVE",model:e,proposal:t},"*"):S.push({model:u(e),proposal:t}),e}}),window.addEventListener("message",function(e){if("MEIOSIS_RENDER_ROOT"===e.data.type)E(e.data.state);else if("MEIOSIS_REQUEST_INITIAL_MODEL"===e.data.type){window.postMessage({type:"MEIOSIS_INITIAL_MODEL",model:I},"*"),w=!0;for(var t=0;t<S.length;t++){var n=S[t],r=n.model,o=n.proposal;window.postMessage({type:"MEIOSIS_RECEIVE",model:r,proposal:o},"*")}}else if("MEIOSIS_REQUEST_STATE"===e.data.type){var i=E.state(e.data.model),a=e.data.ts;window.postMessage({type:"MEIOSIS_STATE",state:i,ts:a},"*")}})}return E};return{createComponent:e,run:m}}var o=n(2),i={};t.REFUSE_PROPOSAL=i;var a=1,u=function(e){return JSON.parse(JSON.stringify(e))};t.newInstance=r;var s=r(),c=s.createComponent;t.createComponent=c;var f=s.run;t.run=f},function(e,t){"use strict";function n(){var e=function(){var e=null,t=function(t){return e=t},n=function(t){return e(t)};return{emit:n,listen:t}};return function(t){var n=t;n||(n="wire_"+o,o++);var i=r[n];return i||(i=e(),r[n]=i),i}}var r={},o=1;t.defaultWireCreator=n}])});
//# sourceMappingURL=meiosis.min.js.map