!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.meiosis=n():e.meiosis=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}r(t(1)),r(t(2))},function(e,n,t){"use strict";function r(){function e(e){if(!(e&&(e.actions||e.nextAction||e.initialModel||e.ready||e.receive||e.view||e.postRender)))throw new Error("Please specify a config when calling createComponent.");var o=e.initialModel;if(o){if("function"!=typeof o)throw new Error("initialModel in createComponent must be a function. You can pass the root initialModel object to the run function.");n.push(o)}var i=e.actions?e.actions(v):v,a=e.receive;a&&t.push(a);var u=e.ready;u&&r.push(function(){return u(i)});var f=e.postRender;f&&c.push(f);var p=e.nextAction;return p&&s.push(function(e,n){return p(e,n,i)}),function(n){return e.view?e.view(n,i):void 0}}var n=[],t=[],r=[],c=[],s=[],f=o.defaultWireCreator(),p=o.defaultWireCreator(),d=f("meiosis_"+a++),l=p(),v=l.emit,E=function(o){var a=o.initialModel||{};n.forEach(function(e){return a=e(a)}),l.listen(function(e){for(var n=!0,r=0;r<t.length;r++){var o=t[r],u=o(a,e);if(u===i){n=!1;break}a=u}n&&(d.emit(a),s.forEach(function(n){return n(a,e)}))});var f=function(e){var n=o.renderer(e,o.rootComponent);return c.forEach(function(n){return n(e)}),n};f.initialModel=a;var p=f;d.listen(p),d.emit(a),r.forEach(function(e){return e()});var v=window.__MEIOSIS_TRACER_DEVTOOLS_GLOBAL_HOOK__;if(v){var E=u(a),m=[],w=!1;e({receive:function(e,n){return w?window.postMessage({type:"MEIOSIS_RECEIVE",model:e,proposal:n},"*"):m.push({model:u(e),proposal:n}),e}}),window.addEventListener("message",function(e){if("MEIOSIS_RENDER_ROOT"===e.data.type)p(e.data.model);else if("MEIOSIS_REQUEST_INITIAL_MODEL"===e.data.type){window.postMessage({type:"MEIOSIS_INITIAL_MODEL",model:E},"*"),w=!0;for(var n=0;n<m.length;n++){var t=m[n],r=t.model,o=t.proposal;window.postMessage({type:"MEIOSIS_RECEIVE",model:r,proposal:o},"*")}}})}return p};return{createComponent:e,run:E}}var o=t(2),i={};n.REFUSE_PROPOSAL=i;var a=1,u=function(e){return JSON.parse(JSON.stringify(e))};n.newInstance=r;var c=r(),s=c.createComponent;n.createComponent=s;var f=c.run;n.run=f},function(e,n){"use strict";function t(){var e=function(){var e=null,n=function(n){return e=n},t=function(n){return e(n)};return{emit:t,listen:n}};return function(n){var t=n;t||(t="wire_"+o,o++);var i=r[t];return i||(i=e(),r[t]=i),i}}var r={},o=1;n.defaultWireCreator=t}])});
//# sourceMappingURL=meiosis.min.js.map