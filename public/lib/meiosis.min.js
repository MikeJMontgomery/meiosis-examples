!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.meiosis=t():e.meiosis=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(1)),r(n(2))},function(e,t,n){"use strict";function r(){function e(e){if(!(e&&(e.actions||e.nextAction||e.initialModel||e.ready||e.receive||e.state||e.view||e.postRender)))throw new Error("Please specify a config when calling createComponent.");var o=e.initialModel;if(o){if("function"!=typeof o)throw new Error("initialModel in createComponent must be a function. You can pass the root initialModel object to the run function.");t.push(o)}var i=e.state;i&&n.push(i);var a=!!e.actions,f=a?e.actions(v):null,p=a?f:v,d=e.receive;d&&r.push(d);var l=e.ready;l&&u.push(function(){return l(p)});var E=e.postRender;E&&s.push(E);var m=e.nextAction;return m&&c.push(function(e,t){var n={model:e,proposal:t};a?n.actions=f:n.propose=v,m(n)}),function(t){return e.view?e.view(t,p):void 0}}var t=[],n=[],r=[],u=[],s=[],c=[],f=o.defaultWireCreator(),p=o.defaultWireCreator(),d=f("meiosis_"+i++),l=p(),v=l.emit,E=function(o){var i=o.initialModel||{};t.forEach(function(e){return i=e(i)});var f=o.state||function(e){return e};n.forEach(function(e){var t=f;f=function(n,r){return e(n,t(n))}}),l.listen(function(e){for(var t=0;t<r.length;t++){var n=r[t],o=n(i,e);i=o}d.emit(i),c.forEach(function(t){return t(i,e)})});var p=function(e){var t=o.renderer(e,o.rootComponent);return s.forEach(function(t){return t(e)}),t};p.initialModel=i,p.state=f;var v=p;d.listen(function(e){return v(f(e))}),d.emit(i),u.forEach(function(e){return e()});var E=window&&window.__MEIOSIS_TRACER_DEVTOOLS_GLOBAL_HOOK__;if(E){var m=a(i),w=[],I=!1;e({receive:function(e,t){return I?window.postMessage({type:"MEIOSIS_RECEIVE",model:e,proposal:t},"*"):w.push({model:a(e),proposal:t}),e}}),window.addEventListener("message",function(e){if("MEIOSIS_RENDER_ROOT"===e.data.type)v(e.data.state);else if("MEIOSIS_REQUEST_INITIAL_MODEL"===e.data.type){window.postMessage({type:"MEIOSIS_INITIAL_MODEL",model:m},"*"),I=!0;for(var t=0;t<w.length;t++){var n=w[t],r=n.model,o=n.proposal;window.postMessage({type:"MEIOSIS_RECEIVE",model:r,proposal:o},"*")}}else if("MEIOSIS_REQUEST_STATE"===e.data.type){var i=v.state(e.data.model),a=e.data.ts;window.postMessage({type:"MEIOSIS_STATE",state:i,ts:a},"*")}})}return v};return{createComponent:e,run:E}}var o=n(2),i=1,a=function(e){return JSON.parse(JSON.stringify(e))};t.newInstance=r;var u=r(),s=u.createComponent;t.createComponent=s;var c=u.run;t.run=c},function(e,t){"use strict";function n(){var e=function(){var e=null,t=function(t){return e=t},n=function(t){return e(t)};return{emit:n,listen:t}};return function(t){var n=t;n||(n="wire_"+o,o++);var i=r[n];return i||(i=e(),r[n]=i),i}}var r={},o=1;t.defaultWireCreator=n}])});
//# sourceMappingURL=meiosis.min.js.map