{"version":3,"sources":["webpack:///webpack/bootstrap 504f73d4d3c7b8220030","webpack:///./src/index.ts","webpack:///./src/meiosis.ts","webpack:///./src/merge.ts","webpack:///./src/wire.ts"],"names":[],"mappings":"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","file":"meiosis.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 504f73d4d3c7b8220030\n **/","import { meiosis } from \"./meiosis\";\n\nexport = meiosis;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.ts\n **/","import { Adapters } from \"./adapters\";\nimport { Config } from \"./config\";\nimport { Merger, defaultMerge } from \"./merge\";\nimport { NextUpdate } from \"./nextUpdate\";\nimport { PostRender } from \"./postRender\";\nimport { Ready } from \"./ready\";\nimport { ReceiveUpdate } from \"./receiveUpdate\";\nimport { Emitter, Listener, WireCreator, Wire, defaultWire } from \"./wire\";\n\ninterface Component {\n  (model: any): any;\n}\n\ninterface CreateComponent {\n  (config: Config): Component;\n}\n\ninterface Run {\n  (model: any): any;\n}\n\ninterface MeiosisInstance {\n  createComponent: CreateComponent;\n  run: Run;\n}\n\ninterface Meiosis {\n  (adapters: Adapters): MeiosisInstance;\n  REFUSE_UPDATE: Object;\n}\n\nconst meiosis: Meiosis = (() => {\n  const meiosisFunction: any = (adapters: Adapters) => {\n    let allReceiveUpdates: Array<ReceiveUpdate> = [];\n    let allReadies: Array<Ready> = [];\n    let allPostRenders: Array<PostRender> = [];\n\n    const wire: WireCreator = adapters.wire || defaultWire;\n    const rootWire = wire(\"meiosis\");\n\n    const merge: Merger = adapters.merge || defaultMerge;\n\n    let rootModel: any = {};\n\n    const createComponent: CreateComponent = (config: Config) => {\n      if (!config || (\n        !config.actions &&\n        !config.nextUpdate &&\n        !config.initialModel &&\n        !config.ready &&\n        !config.receiveUpdate &&\n        !config.view\n      )) {\n        throw new Error(\"Please specify a config when calling createComponent.\");\n      }\n      const initialModel: any = config.initialModel || {};\n      rootModel = merge(rootModel, initialModel);\n\n      const componentWire: Wire = wire();\n      const sendUpdate: Emitter = componentWire.emit;\n      const sendUpdateActions = {sendUpdate};\n      const actions = config.actions ? merge(sendUpdateActions, config.actions(sendUpdate)) : sendUpdateActions;\n\n      const receiveUpdate: ReceiveUpdate = config.receiveUpdate;\n      if (receiveUpdate) {\n        allReceiveUpdates.push(receiveUpdate);\n      }\n\n      const ready: Ready = config.ready;\n      if (ready) {\n        allReadies.push(() => ready(actions));\n      }\n\n      const postRender: PostRender = config.postRender;\n      if (postRender) {\n        allPostRenders.push(postRender);\n      }\n\n      componentWire.listen((update: any) => {\n        let accepted = true;\n\n        for (let i: number = 0; i < allReceiveUpdates.length; i++) {\n          const receiveUpdate: ReceiveUpdate = allReceiveUpdates[i];\n          const receivedUpdate = receiveUpdate(rootModel, update);\n\n          if (receivedUpdate === meiosisFunction.REFUSE_UPDATE) {\n            accepted = false;\n            break;\n          }\n          else {\n            rootModel = receivedUpdate;\n          }\n        };\n\n        if (accepted) {\n          rootWire.emit(rootModel);\n\n          if (config.nextUpdate) {\n            config.nextUpdate(rootModel, update, actions);\n          }\n        }\n      });\n\n      return (model: any) => config.view(model, actions);\n    };\n\n    const run = (root: Component) => {\n      if (allReceiveUpdates.length === 0) {\n        allReceiveUpdates.push(merge);\n      }\n      const renderRoot = (model: any) => {\n        const rootView = root(model);\n        adapters.render(rootView);\n        allPostRenders.forEach((postRender: PostRender) => postRender(rootView));\n      };\n      rootWire.listen(renderRoot);\n\n      rootWire.emit(rootModel);\n      allReadies.forEach((ready: Function) => ready());\n\n      return renderRoot;\n    };\n\n    const meiosisInstance: MeiosisInstance = { createComponent, run };\n\n    return meiosisInstance;\n  };\n\n  meiosisFunction.REFUSE_UPDATE = {};\n\n  return <Meiosis>meiosisFunction;\n})();\n\nexport { meiosis };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/meiosis.ts\n **/","interface Merger {\n  (target: any, ...sources: Array<any>): any;\n}\n\nconst defaultMerge: Merger = function(target: any, ...sources: Array<any>) {\n  if (target === undefined || target === null) {\n    throw new TypeError(\"Cannot convert undefined or null to object\");\n  }\n\n  let output = Object(target);\n  for (let index = 1; index < arguments.length; index++) {\n    const source = arguments[index];\n    if (source !== undefined && source !== null) {\n      for (let nextKey in source) {\n        if (source.hasOwnProperty(nextKey)) {\n          output[nextKey] = source[nextKey];\n        }\n      }\n    }\n  }\n  return output;\n};\n\nexport { Merger, defaultMerge };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/merge.ts\n **/","interface Listener {\n  (data: any): any;\n}\n\ninterface Emitter {\n  (data: any): any;\n}\n\ninterface Wire {\n  emit: Emitter;\n  listen(listener: Listener): any;\n}\n\ninterface WireCreator {\n  (wireName?: string): Wire;\n}\n\nconst defaultWire: WireCreator = (function() {\n  let wires = {};\n  let nextWireId = 1;\n\n  const createWire = function(): Wire {\n    let listener: Listener = null;\n    const listen = (lstnr: Listener) => listener = lstnr;\n    const emit = (data: any) => listener(data);\n\n    return { emit, listen };\n  };\n\n  return function(wireName: string) {\n    let name = wireName;\n    if (!name) {\n      name = \"wire_\" + nextWireId;\n      nextWireId++;\n    }\n    let theWire: Wire = wires[name];\n    if (!theWire) {\n      theWire = createWire();\n      wires[name] = theWire;\n    }\n    return theWire;\n  };\n})();\n\nexport { Emitter, Listener, Wire, WireCreator, defaultWire };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/wire.ts\n **/"],"sourceRoot":""}