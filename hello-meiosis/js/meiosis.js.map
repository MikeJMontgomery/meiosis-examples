{"version":3,"sources":["webpack:///webpack/bootstrap 52e5399b7ce6e657bf62","webpack:///./src/index.ts","webpack:///./src/meiosis.ts","webpack:///./src/merge.ts","webpack:///./src/wire.ts"],"names":[],"mappings":"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","file":"meiosis.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 52e5399b7ce6e657bf62\n **/","import { meiosis } from \"./meiosis\";\n\nexport = meiosis;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.ts\n **/","import { Adapters } from \"./adapters\";\nimport { Config } from \"./config\";\nimport { Merger, defaultMerge } from \"./merge\";\nimport { NextUpdate } from \"./nextUpdate\";\nimport { Ready } from \"./ready\";\nimport { ReceiveUpdate } from \"./receiveUpdate\";\nimport { Emitter, Listener, WireCreator, Wire, defaultWire } from \"./wire\";\n\ninterface Component {\n  (props: any): any;\n}\n\ninterface CreateComponent {\n  (config: Config): Component;\n}\n\ninterface MeiosisInstance {\n  createComponent: CreateComponent;\n}\n\ninterface Meiosis {\n  (adapters: Adapters): MeiosisInstance;\n}\n\nconst meiosis = (adapters: Adapters) => {\n  let allReceiveUpdates: Array<ReceiveUpdate> = [];\n  let allReadies: Array<Ready> = [];\n\n  const wire: WireCreator = adapters.wire || defaultWire;\n  const rootWire = wire(\"meiosis\");\n\n  const merge: Merger = adapters.merge || defaultMerge;\n\n  let rootModel: any = {};\n\n  const createComponent = (config: Config) => {\n    if (!config || (\n      !config.actions &&\n      !config.nextUpdate &&\n      !config.initialModel &&\n      !config.ready &&\n      !config.receiveUpdate &&\n      !config.view\n    )) {\n      throw new Error(\"Please specify a config when calling createComponent.\");\n    }\n    const initialModel: any = config.initialModel || {};\n    rootModel = merge(rootModel, initialModel);\n\n    const componentWire: Wire = wire();\n    const sendUpdate: Emitter = componentWire.emit;\n    const sendUpdateActions = {sendUpdate};\n    const actions = config.actions ? merge(sendUpdateActions, config.actions(sendUpdate)) : sendUpdateActions;\n\n    const receiveUpdate: ReceiveUpdate = config.receiveUpdate;\n    if (receiveUpdate) {\n      allReceiveUpdates.push(receiveUpdate);\n    }\n\n    const ready: Ready = config.ready;\n    if (ready) {\n      allReadies.push(() => ready(actions));\n    }\n\n    componentWire.listen((update: any) => {\n      allReceiveUpdates.forEach((receiveUpdate: ReceiveUpdate) => {\n        rootModel = receiveUpdate(rootModel, update);\n        return rootModel;\n      });\n\n      rootWire.emit(rootModel);\n\n      if (config.nextUpdate) {\n        config.nextUpdate(rootModel, update, actions);\n      }\n    });\n\n    return (model: any) => config.view(model, actions);\n  };\n\n  const run = (root: Component) => {\n    if (allReceiveUpdates.length === 0) {\n      allReceiveUpdates.push(merge);\n    }\n    const renderRoot = (model: any) => { adapters.render(root(model)); };\n    rootWire.listen(renderRoot);\n\n    rootWire.emit(rootModel);\n\n    allReadies.forEach((ready: Function) => {\n      ready();\n    });\n\n    return renderRoot;\n  };\n\n  return { createComponent, run };\n};\n\nexport { meiosis };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/meiosis.ts\n **/","interface Merger {\n  (target: any, ...sources: Array<any>): any;\n}\n\nconst defaultMerge: Merger = function(target: any, ...sources: Array<any>) {\n  if (target === undefined || target === null) {\n    throw new TypeError(\"Cannot convert undefined or null to object\");\n  }\n\n  let output = Object(target);\n  for (let index = 1; index < arguments.length; index++) {\n    const source = arguments[index];\n    if (source !== undefined && source !== null) {\n      for (let nextKey in source) {\n        if (source.hasOwnProperty(nextKey)) {\n          output[nextKey] = source[nextKey];\n        }\n      }\n    }\n  }\n  return output;\n};\n\nexport { Merger, defaultMerge };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/merge.ts\n **/","interface Listener {\n  (data: any): any;\n}\n\ninterface Emitter {\n  (data: any): any;\n}\n\ninterface Wire {\n  emit: Emitter;\n  listen(listener: Listener): any;\n}\n\ninterface WireCreator {\n  (wireName?: string): Wire;\n}\n\nconst defaultWire: WireCreator = (function() {\n  let wires = {};\n  let nextWireId = 1;\n\n  const createWire = function(): Wire {\n    let listener: Listener = null;\n    const listen = (lstnr: Listener) => listener = lstnr;\n    const emit = (data: any) => listener(data);\n\n    return { emit, listen };\n  };\n\n  return function(wireName: string) {\n    let name = wireName;\n    if (!name) {\n      name = \"wire_\" + nextWireId;\n      nextWireId++;\n    }\n    let theWire: Wire = wires[name];\n    if (!theWire) {\n      theWire = createWire();\n      wires[name] = theWire;\n    }\n    return theWire;\n  };\n})();\n\nexport { Emitter, Listener, Wire, WireCreator, defaultWire };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/wire.ts\n **/"],"sourceRoot":""}