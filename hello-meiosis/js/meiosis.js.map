{"version":3,"sources":["webpack:///webpack/bootstrap f9b7e44375b30ecd34c3","webpack:///./src/index.ts","webpack:///./src/meiosis.ts","webpack:///./src/merge.ts","webpack:///./src/wire.ts"],"names":[],"mappings":"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","file":"meiosis.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f9b7e44375b30ecd34c3\n **/","import { init, REFUSE_UPDATE , CreateComponent, Component, Meiosis, RenderRoot } from \"./meiosis\";\nimport { Adapters } from \"./adapters\";\nimport { Emitter } from \"./wire\";\nimport { NextUpdate } from \"./nextUpdate\";\nimport { PostRender } from \"./postRender\";\nimport { Ready } from \"./ready\";\nimport { ReceiveUpdate } from \"./receiveUpdate\";\nimport { Renderer } from \"./renderer\";\n\nexport {\n  init,\n  REFUSE_UPDATE,\n  Adapters,\n  Component,\n  CreateComponent,\n  Emitter,\n  Meiosis,\n  NextUpdate,\n  PostRender,\n  Ready,\n  ReceiveUpdate,\n  Renderer,\n  RenderRoot\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.ts\n **/","import { Adapters } from \"./adapters\";\nimport { Config } from \"./config\";\nimport { Merger, defaultMerge } from \"./merge\";\nimport { NextUpdate } from \"./nextUpdate\";\nimport { PostRender } from \"./postRender\";\nimport { Ready } from \"./ready\";\nimport { ReceiveUpdate } from \"./receiveUpdate\";\nimport { Emitter, Listener, WireCreator, Wire, defaultWireCreator } from \"./wire\";\n\ninterface Component<M, V> {\n  (model: M): V;\n}\n\ninterface CreateComponent<M, V, U> {\n  (config: Config<M, V, U>): Component<M, V>;\n}\n\ninterface RenderRoot<M> {\n  (model: M): void;\n}\n\ninterface Run<M, V> {\n  (component: Component<M, V>): RenderRoot<M>;\n}\n\ninterface Meiosis<M, V, U> {\n  createComponent: CreateComponent<M, V, U>;\n  run: Run<M, V>;\n}\n\nconst REFUSE_UPDATE = {};\n\nfunction init<M, V, U>(adapters: Adapters<M, V, U>): Meiosis<M, V, U> {\n  let allReceiveUpdates: Array<ReceiveUpdate<M, U>> = [];\n  let allReadies: Array<Ready<U>> = [];\n  let allPostRenders: Array<PostRender<V>> = [];\n\n  const createRootWire: WireCreator<M> = adapters.rootWire || defaultWireCreator();\n  const createComponentWire: WireCreator<U> = adapters.componentWire || defaultWireCreator();\n  const rootWire: Wire<M> = createRootWire(\"meiosis\");\n\n  const merge: Merger = adapters.merge || defaultMerge;\n\n  let rootModel: M = null;\n\n  const createComponent: CreateComponent<M, V, U> = (config: Config<M, V, U>) => {\n    if (!config || (\n      !config.actions &&\n      !config.nextUpdate &&\n      !config.initialModel &&\n      !config.ready &&\n      !config.receiveUpdate &&\n      !config.view\n    )) {\n      throw new Error(\"Please specify a config when calling createComponent.\");\n    }\n    const initialModel: any = config.initialModel || {};\n    rootModel = (rootModel === null) ? initialModel : merge(rootModel, initialModel);\n\n    const componentWire: Wire<U> = createComponentWire();\n    const sendUpdate: Emitter<U> = componentWire.emit;\n    const sendUpdateActions = {sendUpdate};\n    const actions = config.actions ? merge(sendUpdateActions, config.actions(sendUpdate)) : sendUpdateActions;\n\n    const receiveUpdate: ReceiveUpdate<M, U> = config.receiveUpdate;\n    if (receiveUpdate) {\n      allReceiveUpdates.push(receiveUpdate);\n    }\n\n    const ready: Ready<U> = config.ready;\n    if (ready) {\n      allReadies.push(() => ready(actions));\n    }\n\n    const postRender: PostRender<V> = config.postRender;\n    if (postRender) {\n      allPostRenders.push(postRender);\n    }\n\n    componentWire.listen((update: any) => {\n      let accepted = true;\n\n      for (let i: number = 0; i < allReceiveUpdates.length; i++) {\n        const receiveUpdate: ReceiveUpdate<M, U> = allReceiveUpdates[i];\n        const receivedUpdate: M = receiveUpdate(rootModel, update);\n\n        if (receivedUpdate === REFUSE_UPDATE) {\n          accepted = false;\n          break;\n        }\n        else {\n          rootModel = receivedUpdate;\n        }\n      };\n\n      if (accepted) {\n        rootWire.emit(rootModel);\n\n        if (config.nextUpdate) {\n          config.nextUpdate(rootModel, update, actions);\n        }\n      }\n    });\n\n    return (model: M) => config.view(model, actions);\n  };\n\n  const run: Run<M, V> = (root: Component<M, V>) => {\n    if (allReceiveUpdates.length === 0) {\n      allReceiveUpdates.push(merge);\n    }\n    const renderRoot: RenderRoot<M> = (model: M) => {\n      const rootView: V = root(model);\n      adapters.render(rootView);\n      allPostRenders.forEach((postRender: PostRender<V>) => postRender(rootView));\n    };\n    rootWire.listen(renderRoot);\n\n    rootWire.emit(rootModel);\n    allReadies.forEach((ready: Function) => ready());\n\n    return renderRoot;\n  };\n\n  const meiosisInstance: Meiosis<M, V, U> = {\n    createComponent,\n    run\n  };\n\n  return meiosisInstance;\n};\n\nexport {\n  init,\n  REFUSE_UPDATE,\n  Component,\n  CreateComponent,\n  Meiosis,\n  RenderRoot\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/meiosis.ts\n **/","interface Merger {\n  (target: any, ...sources: Array<any>): any;\n}\n\nconst defaultMerge: Merger = function(target: any, ...sources: Array<any>) {\n  if (target === undefined || target === null) {\n    throw new TypeError(\"Cannot convert undefined or null to object\");\n  }\n\n  let output = Object(target);\n  for (let index = 1; index < arguments.length; index++) {\n    const source = arguments[index];\n    if (source !== undefined && source !== null) {\n      for (let nextKey in source) {\n        if (source.hasOwnProperty(nextKey)) {\n          output[nextKey] = source[nextKey];\n        }\n      }\n    }\n  }\n  return output;\n};\n\nexport { Merger, defaultMerge };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/merge.ts\n **/","interface Listener<U> {\n  (update: U): void;\n}\n\ninterface Emitter<U> {\n  (update: U): void;\n}\n\ninterface Wire<U> {\n  emit: Emitter<U>;\n  listen(listener: Listener<U>): any;\n}\n\ninterface WireCreator<U> {\n  (wireName?: string): Wire<U>;\n}\n\nfunction defaultWireCreator<U>(): WireCreator<U> {\n  let wires = {};\n  let nextWireId = 1;\n\n  const createWire = function(): Wire<U> {\n    let listener: Listener<U> = null;\n    const listen = (lstnr: Listener<U>) => listener = lstnr;\n    const emit = (update: U) => listener(update);\n\n    return { emit, listen };\n  };\n\n  return function(wireName: string) {\n    let name = wireName;\n\n    if (!name) {\n      name = \"wire_\" + nextWireId;\n      nextWireId++;\n    }\n\n    let theWire: Wire<U> = wires[name];\n\n    if (!theWire) {\n      theWire = createWire();\n      wires[name] = theWire;\n    }\n\n    return theWire;\n  };\n};\n\nexport { Emitter, Listener, Wire, WireCreator, defaultWireCreator };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/wire.ts\n **/"],"sourceRoot":""}